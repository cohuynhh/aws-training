## Dessigning high available and cost efficient cloud solutions

### Elasticity and Scalability
  * States
    * High Availability
	* Cost Efficient
	* Fualt Tolerant
  * Elasticity is the core dessign principle that tied the before "3 states"
  * Between regions costs go up
  * RTO. Recovery Time Objective. Or Business Continuity Planning
  * HA Top 10 ... or HAt10
	* 10. Regions
	* 09. AZ
	* 08. VPC
	* 07. ELB
	* 06. SQS
	* 05. EC2
	* 04. Elastic IP
	* 03. Route 53
	* 02. CloudWatch
	* 01. Auto Scaling

### AWS Well architecture Framework
  * Pillars
    * Security
	* Reliability
	* Performance Efficiency
	* Cost Optimization
  * Regions HAt10#10
    * 15 Regions
	* Isolated one each other
	* Billong is not tied to
	* from console you have to select one

**AWS CLI**  	
`$ aws ec2 describe-regions`
`$ aws ec2 configure`	

### AZ's HAt10#9
* Distinct geographical locations within regions
* Isolated
* Different electrical grids, risk profile, flood plains, etc.
* LAN connection between them
	
* **Region & AZ**
  * AMI     -- are tie to --> Regions
  * Elastic IP			--> Regions. Max 5/regions
  * Sec. Groups			--> Regions. Max 500/regions
  * EBS Snapshots			--> Regions
  * EBS volumes 			--> AZs
  * EC2 instances 		--> AZs, but 
  * EC2 instances "IDs"	--> Regions
	
### Amazon VPC HAt10#8
* USe Security Groups
* CIDR netmask /16 to /28
* IGW INternet Gateway
* Hardware VPN Connection
* VGW. Virtual Private Gateway
* CGW Customer Gateway
* Example: VPC -- VGW -- Hardware VPN Connection -- CGW -- inet
* RT Router Tables
* VPC Peering Connection
* VPC Endpoint (like to S3)
* CIDR Classless INter-Domain Routing
  * First 4 IP and last (255) are aws reserved
  * ex: subnet 10.0.0.0/24 --are reserved-->   
    10.0.0.0,10.0.0.1,10.0.0.2,10.0.0.3 y 10.0.0.255
* aws not support broadcast in VPC (255)
* each Subnet has one RT
* When create a subnet is associate with the main RT of the VPC, you can change it
* ACL Access Control List, or Network ACL
* Subnet must be associate with a ACL, if it is not with the defaul
* 200 Subnets per VPC
* IGW
  1) Provides a target in VPC to route traffic to inet
  2) Translation to instances with a public ip address
* Public Subnet: when is associate with a RT that has a route to an IGW
* You can create a VPN tunnel using IPsec to on-premise or co-locations
* Direct Connect (better than IPsec)
  * more predictable connectivity
  * is a private connection
  * uses 802.19 VLAN standard
* ACLs are subnet level control
  * SG instance level control
  * VPC has default ACL
  * ACL are stateless
  * Custom ACL deny all by default
  * Default ACL allow all by default
  * One ACL can have N subnet. One subnet must have just one ACL  1-N
* SG. Security Groups
  * Is a virtual Firewall for resources
  * Instance level control
  * You can "allow rules" but not deny rules
  * each resource to many SG
  * each resource has assingned a SG (the default al least)
  * are stateful
  * return traffic allowed by default
  * SG are associate with network interfaces
* Cmoparision SG--ACL
SG								ACL
* instance level				* subnet level
* allow rules only				* allow & deny rules
* stateful						* stateless
* return traffic allowed		* return traffic must be allowed with rules
* evaluate all rules before		* process rules in numeric ORDER
  decide
* apply only instances 			* apply to all in the subnet
  associated with
* First layer security			*Backup layer security
* No good for blocking			* Good for maliciouse Id/DooS hosts

* VPC Limits Summary
  * 5 VPC per Region
  * 5 IGW per Region
  * 5 Elastic IP addresses per Region
  * 10 VPN connections per VPC per VGW
  * 50 VPN connections per Region
  * 200 subnets per VPC
  * 500 SG per VPC per Region
  * Exists a default VPC in each region you can uses
    * Having a default Inet Gateway
	* Having a default ACL
	* Having a default RT

